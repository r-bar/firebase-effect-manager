# Firebase Push ID Generator Toy App

This is an elm implementation of the [Firebase unique ID generation algorithm](https://gist.github.com/mikelehen/3596a30bd69384624c11)

## Current State
Right now this will compile, but there is a problem. `Key.generate` does not
pass the `Msg` a string and I am unable change `Key.generate` to pass a `msg`
that is a function of type `String -> Msg` through.

Right now the effect manager (Key.elm) seems to update the `Seed` appropriately. 
See the console for `Debug` messages.

Main.elm is a toy interface to help quickly debug.

## Plea for help
Hoping that someone can help me figure out how to pass the type I want through
the `Key.generate` and `onEffects` functions.

Ideal `Key.generate` signature:
```elm
generate : (String -> msg) -> Cmd msg
```


Ideal usage:

```
type alias Model = List String

type Msg
    = Generate
    | AddKey String

update msg model
    case msg of
        Generate ->
            (model, Cmd.batch [ Key.generate AddKey ])
        AddKey key ->
            (key :: model, Cmd.none)
```


## Reasoning for Using an Effect Manager
Currently the code in Key.elm does work provided you pass the `Seed` generated
by Random.step into the model of your host application. This `Key` library will
ultimately be used as a part of a much larger firebase library that has, thus
far, avoided inserting update messages, states, and subscriptions into the host
application.

The reason this is incompatible with the existing `Random.generate`
implementation is there is a time sensitive part of the key. The elm `Time`
library uses `Task`s while the `Random` library uses its own types. You cannot
make a randomly generated string that has a time dependent component due to the
inability to compose the types generated by these libraries.

The seed used by this SHOULD be a global state and calling `Key.generate` SHOULD
cause global side effects by updating that key. It is not ideal for there to be
a potential data race in the host application that may cause duplicate "random"
parts of these firebase keys.
